#RING BINARY
  - platform: ring
    monitored_conditions:
      - ding
      - motion

#SmartThings Sensors
##DOOR
  # - platform: mqtt
  #   state_topic: "smartthings/Front Door Sensor/contact/state"
  #   name: "Front Door Sensor"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Back Door/contact/state"
  #   name: "Back Door Sensor"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Garage Entry Sensor/contact/state"
  #   name: "Garage Entry Sensor"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   retain: false
#  - platform: mqtt
#    state_topic: "smartthings/Liam's Room/contact/state"
#    name: "Liam's Room Door"
#    qos: 0
#    payload_on: "open"
#    payload_off: "closed"
#    device_class: opening
#    retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Pantry Door/contact/state"
  #   name: "Pantry Door"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   retain: false
##APPLIANCE
  # - platform: mqtt
  #   state_topic: "smartthings/Washer Sensor/contact/state"
  #   name: "Washer Door"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   # retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Dryer Sensor/contact/state"
  #   name: "Dryer Door"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
##WINDOWS
  # - platform: mqtt
  #   state_topic: "smartthings/Front Window 1/contact/state"
  #   name: "Front Window 1"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Front Window 2/contact/state"
  #   name: "Front Window 2"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Window Over Sink/contact/state"
  #   name: "Window Over Sink"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Basement North Window/contact/state"
  #   name: "Basement North Window"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Basement South Window 1/contact/state"
  #   name: "Basement South Window 1"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Basement South Window 2/contact/state"
  #   name: "Basement South Window 2"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Play Room Window/contact/state"
  #   name: "Play Room Window"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: opening
  #   #retain: false
##GARAGE DOOR
#  - platform: mqtt
#    state_topic: "smartthings/Large Door/contact/state"
 #   name: "Large Garage Door Contact"
 #   qos: 0
#    payload_on: "open"
 #   payload_off: "closed"
#    device_class: opening
#    retain: false
#  - platform: mqtt
#    state_topic: "smartthings/Small Door/contact/state"
 #   name: "Small Garage Door Contact"
 #   qos: 0
#    payload_on: "open"
#    payload_off: "closed"
#    device_class: opening
#    retain: false
##MOTION
  # - platform: mqtt
  #   state_topic: "smartthings/First Floor Entry/motion/state"
  #   name: "First Floor Entry Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
  #   retain: false
  # - platform: mqtt
  #   state_topic: "smartthings/Bathroom Motion/motion/state"
  #   name: "Bathroom Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
  # - platform: mqtt
  #   state_topic: "smartthings/Iris 3405-L Keypad/motion/state"
  #   name: "Entry Keypad Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
 # - platform: mqtt
 #   state_topic: "smartthings/Kitchen Motion/motion/state"
#    name: "Kitchen Motion"
 #   qos: 0
#    payload_on: "active"
#    payload_off: "inactive"
 #   device_class: motion
#  - platform: mqtt
 #   state_topic: "smartthings/Upstairs Motion/motion/state"
 #   name: "Upstairs Motion"
 #   qos: 0
#    payload_on: "active"
#    payload_off: "inactive"
 #   device_class: motion
  # - platform: mqtt
  #   state_topic: "smartthings/Basement Motion/motion/state"
  #   name: "Basement Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
  # - platform: mqtt
  #   state_topic: "smartthings/Front Door Cam/motion/state"
  #   name: "Driveway Camera Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
  # - platform: mqtt
  #   state_topic: "smartthings/Bedroom Motion/motion/state"
  #   name: "Bedroom Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
  # - platform: mqtt
  #   state_topic: "smartthings/Office Motion/motion/state"
  #   name: "Office Motion"
  #   qos: 0
  #   payload_on: "active"
  #   payload_off: "inactive"
  #   device_class: motion
##SECURITY
  # - platform: mqtt
  #   state_topic: "smartthings/Downstairs Glass Break Sensor/contact/state"
  #   name: "Downstairs Glass Break"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: sound
##SmartAlarm Trigger Device
  # - platform: mqtt
  #   state_topic: "smartthings/zzSA Trigger/contact/state"
  #   name: "SmartAlarm Triggered"
  #   qos: 0
  #   payload_on: "open"
  #   payload_off: "closed"
  #   device_class: safety

##Virtual Binary from Zwave

  - platform: template
    sensors:
      front_door_sensor:
        friendly_name: "Front Door Sensor"
        device_class: door
        value_template: "{{ is_state('sensor.front_door_access_control', '22') }}"

  - platform: template
    sensors:
      front_door_tamper:
        friendly_name: "Front Door Tamper"
        device_class: safety
        value_template: "{{ is_state('sensor.front_door_tamper', '0') }}"

  - platform: template
    sensors:
      back_door_sensor:
        friendly_name: "Back Door Sensor"
        device_class: door
        value_template: "{{ is_state('sensor.back_door_alarm_type', '22') }}"

  - platform: template
    sensors:
      back_door_tamper:
        friendly_name: "Back Door Tamper"
        device_class: safety
        value_template: "{{ is_state('sensor.back_door_tamper', '0') }}"

  - platform: template
    sensors:
      liam_door_sensor:
        friendly_name: "Liam Door Sensor"
        device_class: door
        value_template: "{{ is_state('sensor.hank_hkzwdws01_doorwindow_sensor_access_control', '22') }}"


  - platform: template
    sensors:
      first_floor_entry_motion:
        friendly_name: "First Floor Entry Motion"
        device_class: motion
        value_template: "{{ is_state('sensor.vision_zp3111_multisensor_4in1_alarm_level_3', '255') }}"
        
  - platform: template
    sensors:
      kitchen_motion:
        friendly_name: "Kitchen Motion"
        device_class: motion
        value_template: "{{ is_state('sensor.vision_zp3102_pir_motion_sensor_alarm_level_2', '255') }}"

  - platform: template
    sensors:
      upstairs_motion:
        friendly_name: "Upstairs Motion"
        device_class: motion
        value_template: "{{ is_state('sensor.vision_zp3102_pir_motion_sensor_alarm_level', '255') }}"

  - platform: template
    sensors:
      downstairs_glass_break:
        friendly_name: "Downstairs Glass Break"
        device_class: safety
        value_template: "{{ is_state('sensor.linear_unknown_type4742_id3030_alarm_type', '255') }}"

##Phone Battery Charging

  - platform: template
    sensors:
      ryan_phone_charging:
        friendly_name: "Ryan's Phone Charging"
        device_class: plug
        value_template: "{{ states.device_tracker.google_maps_114680120030307638360.attributes.battery_charging }}"

  - platform: template
    sensors:
      kristi_phone_charging:
        friendly_name: "Kristi's Phone Charging"
        device_class: plug
        value_template: "{{ states.device_tracker.google_maps_118314383764095593834.attributes.battery_charging }}"

##Might be different value
#washer
  - platform: mqtt
    state_topic: "smartthings/Washer Sensor/acceleration/state"
    name: "Washer Vibration"
    qos: 0
    payload_on: "active"
    payload_off: "inactive"
    device_class: vibration
  - platform: mqtt
    state_topic: "smartthings/Liam's Button/button"
    name: "Liam's Button"
    qos: 0
    payload_on: "pushed"
    payload_off: "released"
#Dryer
#  - platform: template
#    sensors:
#      washer_active:
#        value_template: '{{ as_timestamp(now()) - as_timestamp(states.sensor.washer_movement.last_changed) > 30 }}'
#        friendly_name: "Washer Active"
#        device_class: moving
  - platform: template
    sensors:
      dryer_active:
        friendly_name: "Dryer Active"
        device_class: moving
        value_template: "{{ (is_state('binary_sensor.dryer_vibration','on') and relative_time(states.binary_sensor.dryer_vibration.last_updated) < '60 minutes')  or  (is_state('binary_sensor.dryer_vibration','off') and relative_time(states.binary_sensor.dryer_vibration.last_updated) < '3 minutes') }}"
#Alert
  - platform: template
    sensors:
      lg_garage_night:
        value_template: "{{ is_state('sun.sun', 'below_horizon') and is_state('states.binary_sensor.large_garage_door_contact.state', 'on') }}"
        friendly_name: 'Large Garage Open @ Night'
  - platform: template
    sensors:
      sm_garage_night:
        value_template: "{{ is_state('sun.sun', 'below_horizon') and is_state('states.binary_sensor.small_garage_door_contact.state', 'on') }}"
        friendly_name: 'Small Garage Open @ Night'
  - platform: template
    sensors:
      lg_garage_day:
        value_template: "{{ is_state('sun.sun', 'above_horizon') and is_state('states.binary_sensor.large_garage_door_contact.state', 'on') }}"
        friendly_name: 'Large Garage Open during Day'
  - platform: template
    sensors:
      sm_garage_day:
        value_template: "{{ is_state('sun.sun', 'above_horizon') and is_state('states.binary_sensor.small_garage_door_contact.state', 'on') }}"
        friendly_name: 'Small Garage Open during Day'
  - platform: template
    sensors:
      garage_lock_open:
        value_template: "{{ is_state('states.lock.garage_lock.state', 'locked') }}"
        friendly_name: 'Garage Lock Unlocked'
  - platform: template
    sensors:
      front_lock_open:
        value_template: "{{ is_state('states.lock.front_lock.state', 'locked') }}"
        friendly_name: 'Front Lock Unlocked'

##Nest Climate
  - platform: template
    sensors:
      nest_away:
        value_template: "{{ is_state_attr('climate.downstairs_thermostat', 'away_mode', 'off') }}"
        friendly_name: 'Nest Away Mode'

##Devices
  - platform: template
    sensors:
      wax_melt_relay:
        device_class: heat
        value_template: "{{ is_state('switch.waxwarmer_relay', 'on') }}"
        
#Bayesian
  # - platform: bayesian
  #   prior: 0.5
  #   name: 'Ryan Presence'
  #   probability_threshold: 0.85
  #   observations:
  #     - entity_id: 'device_tracker.ryan_note8'
  #       prob_given_true: 0.9
  #       prob_given_false: 0.1
  #       platform: 'state'
  #       to_state: 'home'
  #     # - entity_id: 'device_tracker.galaxynote8'
  #     #   prob_given_true: 0.7
  #     #   prob_given_false: 0.3
  #     #   platform: 'state'
  #     #   to_state: 'home'
  #     - entity_id: 'sensor.ryan_occupancy'
  #       prob_given_true: 1
  #       prob_given_false: 0.3
  #       platform: 'state'
  #       to_state: 'home'
  # - platform: bayesian

#ST Anywhere Sensors
  - platform: mqtt
    state_topic: "smartthings/ST Anywhere Parent (contact1)/contact/state"
    name: "Dryer Vibration"
    payload_on: "closed"
    payload_off: "open"
    device_class: vibration
#Ping Sensors
  - platform: ping 
    host: !secret walle_ip
    name: "Wall-E Ping"
  - platform: ping
    host: !secret rachio_ip
    name: "Rachio Ping"
  - platform: ping
    host: !secret frontcam_ip
    name: "Front Camera Ping"  

  ##ADD HUBS
